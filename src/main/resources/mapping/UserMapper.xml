<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.johnyu.mapper.UserMapper">
<!--    <resultMap type="org.apache.ibatis.submitted.rounding.User" id="usermap">-->
<!--        <id column="id" property="id"/>-->
<!--        <result column="name" property="name"/>-->
<!--        <result column="funkyNumber" property="funkyNumber"/>-->
<!--        <result column="roundingMode" property="roundingMode"/>-->
<!--    </resultMap>-->

    <select id="findUserByUsername" resultMap="userResultMap">
        select username,password,authority from users u left join user_auth ua on u.id=ua.user_id left join authorities a on a.id=ua.auth_id
        where username=#{username}
    </select>
    <resultMap id="userResultMap" type="cn.johnyu.entity.User">
        <result property="username" column="username"></result>
        <result property="password" column="password"></result>
        <collection property="authorities" ofType="cn.johnyu.entity.MyGrantedAuthority">
            <result property="authority" column="authority"></result>
        </collection>
    </resultMap>

</mapper>